import { Image, Head, Notes, Appear, Steps} from 'mdx-deck'
import highlight from '@mdx-deck/themes/syntax-highlighter-prism'
import QRCode from 'qrcode.react'

import { Graph } from './juice/Graph'
import { Title } from './juice/Title'
import Paragraph from './juice/Paragraph.bs'
import SplitLayout from './juice/SplitLayout.bs'
import ImageFit from './juice/Image.bs'
import GlitchImage from './juice/GlitchImage.bs'
import VideoBackground from './juice/VideoBackground.bs'
import CodeView from './juice/CodeSurfer.bs'
import { CodeSurfer, CodeSurferColumns, Step } from "code-surfer"
import { nightOwl, vsDark } from "@code-surfer/themes"


import glitchFacesVideo from './images/glitched-faces.mp4'

import glitchUnsettlingImage from './images/glitch-unsettling.jpg'
import glitchContrastImage from './images/glitch-contrast.png'
import glitchUnbreakableImage from './images/unbreakable.jpg'
import glitchPerspectiveImage from './images/perspective.jpg'
import glitchBust from './images/glitch-bust.jpeg'
import astrocodersImage from './images/astrocoders.png'

import fnmImage from './images/fnm.svg'
import reveryImage from './images/revery.png'

import variantSnippet from '!raw-loader!./snippets/VariantDemo.re' 
import variantTypesTsSnippet from '!raw-loader!./snippets/VariantDemoTypes.ts' 
import variantSwitchTsSnippet from '!raw-loader!./snippets/VariantDemoSwitch.ts' 

import patternMatchingDemoTS from '!raw-loader!./snippets/PatternMatchingDemo.ts' 
import patternMatchingDemoTS2 from '!raw-loader!./snippets/PatternMatchingDemo2.ts' 
import patternMatchingDemoTS3 from '!raw-loader!./snippets/PatternMatchingDemo3.ts' 
import patternMatchingDemoReason from '!raw-loader!./snippets/PatternMatchingDemo.re' 
import patternMatchingDemoReasonError from '!raw-loader!./snippets/PatternMatchingDemoError.re' 
import graphQLDemo from '!raw-loader!./snippets/GraphQLDemo.graphql' 
import graphQLDemoReason from '!raw-loader!./snippets/GraphQLDemo.re'

import reasonmlToolchain from './images/reasonml-architechture.svg'
import stinks from './images/stinks.jpg'
import stonks from './images/stonks.jpg'

export const themes = [
  highlight
]

<Head>
  <title>Unbreakable apps with ECMAScript 2077</title>
  <meta name='twitter:card' content='summary_large_image' />
  <meta name='twitter:site' content='@fakenickels' />
  <meta name='twitter:title' content='ReasonML, ES2077' />
  <meta name='twitter:description' content='Unbreakable apps with ECMAScript 2077' />
</Head>

## Incoming from the future

---

<Title glitchText1="ES2077" variant="featured">
  ReasonML
</Title>

---
<SplitLayout>
  <GlitchImage src={glitchBust} />

  <div style={{textAlign: 'center'}}>
    <h2>Gabriel R. Abreu</h2>
    <p>Astrocoders</p>
    <p>CTO Fundador</p>
    <p>Criador do Epitath (hooks prior art)</p>
    <p>e ReForm</p>
    <p>Mantedor do ReasonApolloHooks</p>
  </div>
</SplitLayout>

--- 
<Title variant="featured">
  @fakenickels
</Title>

Twitter, GitHub, Reddit

---

# O que é ReasonML?

<Steps>

- Mais Uma Ferramenta Foda Criada pelo Facebook ™️
- Mesmo criador do React, Jordan Walke
- Um dialeto de OCaml
- OCaml é uma linguagem funcional com suporte a OOP, super rápida, com inferência de tipos e altamente hackeável
- ML Family, sistema de tipos Hindley-Milner
  
</Steps>

---

# OCaml? Eoq?

- Jane Street
- Bloomberg
- Facebook
- C-like startup performance
  - Sistema de tipos permite perf tweaks agressivos

---

<SplitLayout>

  <ImageFit src={stinks} />

  # Put types in JS

</SplitLayout>

---

<SplitLayout>
  <ImageFit src={stonks} />

  # Put JS in types

</SplitLayout>

---

<SplitLayout>

  <Image src={glitchUnbreakableImage} />

  <h1 style={{textAlign: 'center'}}>Inquebrável?</h1>
  
</SplitLayout>

---

# Vamos falar de filosofia

<div style={{textAlign: 'center'}}>

<Steps>

### "Um problema é composto de muitas possibilidades/ramos. Quando não tratamos todas essas possibilidades temos a maioria do que chamamos de bugs."

### "Um sistema de tipos não elimina os bugs magicamente, mas ele aponta para as possibilidades não tratadas e pede para vocês cobri-las"

</Steps>

</div>

---

<CodeSurfer theme={nightOwl}>

```reason
type schoolPerson = Teacher | Director | Student(string);

let greeting = person =>
  switch (person) {
  | Teacher => "Hey Professor!"
  | Director => "Hello Director."
  | Student("Richard") => "Still here Ricky?"
  | Student(anyOtherName) => "Hey, " ++ anyOtherName ++ "."
  };
```

```diff 1 subtitle="Ramos/possibilidades"

```

```diff 4:9 subtitle="Uso de um valor do tipo requer o tratamento de cada uma"

```

</CodeSurfer>

---

# cultive qualidade

- refatorações sem medo
- modelagem do programa
  - variants/algebraic data types
  - sistema de módulos
  - linguagem robusta

---

# altamente hackeável?

- js_of_ocaml
- rehp
- BuckleScript
- ARM (@TheEduardoRFS)
- caixas de sapato???

---

# Serbet

[GitHub](https://github.com/mrmurphy/serbet)

---

# Sihl

[GitHub](https://github.com/oxidizing/sihl)

---

# es77.fakenickels.dev

Mas dê uma olhada em Reason bem antes e se você realmente ficou encucado com isso.

---

# refs

- https://reasonml.github.io
- https://github.com/oxidizing/sihl
- https://github.com/jordwalke/rehp/
- https://github.com/jordwalke/rehp/